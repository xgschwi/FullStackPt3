(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(15),o=n.n(c),i=(n(20),n(3)),a=n(0),s=function(e){var t=e.filter,n=e.setFilter;return Object(a.jsx)("form",{children:Object(a.jsxs)("div",{children:["Filter shown with: ",Object(a.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})})},u=n(5),d=n(4),l=n.n(d),b="api/persons",j={getAll:function(){return l.a.get(b).then((function(e){return e.data}))},create:function(e){return l.a.post(b,e).then((function(e){return e.data}))},deletePerson:function(e){return l.a.delete("".concat(b,"/").concat(e))},update:function(e){return l.a.put("".concat(b,"/").concat(e.id),e).then((function(e){return e.data}))}},f=function(e){var t=e.newName,n=e.newNum,r=e.persons,c=e.setName,o=e.setNum,i=e.setPersons,s=e.setNotification,d=e.setFlag;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=r.find((function(e){return e.name===t}));if(void 0===a){var l={name:t,number:n};j.create(l),i(r.concat(l)),d(!0),s("Added ".concat(t))}else if(window.confirm("".concat(t," is already added to the phonebook, replace the old number with a new one?"))){var b=Object(u.a)(Object(u.a)({},a),{},{number:n});j.update(b).then((function(e){i(r.map((function(e){return e.id!==b.id?e:Object(u.a)(Object(u.a)({},e),{},{number:n})}))),d(!0),s("Updated ".concat(t,"'s number"))})).catch((function(e){d(!1),s("Information of ".concat(t,"'s has already been removed from the server")),i(r.filter((function(e){return e.id!==b.id})))}))}setTimeout((function(){d(!1)}),11e3),setTimeout((function(){s(null)}),1e4),c(""),o("")},children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:t,onChange:function(e){c(e.target.value)}})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:n,onChange:function(e){o(e.target.value)}})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.persons,n=e.person,r=e.set;return Object(a.jsxs)("p",{children:[n.name," ",n.number,Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),window.confirm("Are you sure you want to delete ".concat(n.name,"?"))&&(j.deletePerson(n.id),r(t.filter((function(e){return e.id!==n.id}))))},children:"Delete"})]})},m=function(e){var t=e.persons,n=e.filter,r=e.setPersons,c=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return Object(a.jsx)("div",{children:0===n.length?t.map((function(e){return Object(a.jsx)(h,{persons:t,person:e,set:r},e.name)})):c.map((function(e){return Object(a.jsx)(h,{persons:t,person:e,set:r},e.name)}))})},O=function(e){var t=e.flag,n=e.message;if(null===n)return null;return t?Object(a.jsx)("div",{style:{color:"green",borderColor:"green",background:"aliceBlue",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,margin:"auto",textAlign:"center",width:150},children:n}):Object(a.jsx)("div",{style:{color:"red",borderColor:"red",background:"aliceBlue",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,margin:"auto",textAlign:"center",width:700},children:n})},p=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),u=Object(i.a)(o,2),d=u[0],l=u[1],b=Object(r.useState)(""),h=Object(i.a)(b,2),p=h[0],v=h[1],x=Object(r.useState)(""),g=Object(i.a)(x,2),w=g[0],N=g[1],S=Object(r.useState)(null),y=Object(i.a)(S,2),k=y[0],C=y[1],A=Object(r.useState)(!1),P=Object(i.a)(A,2),F=P[0],B=P[1];return Object(r.useEffect)((function(){j.getAll().then((function(e){return c(e)}))}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(O,{flag:F,message:k}),Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(s,{filter:w,setFilter:N}),Object(a.jsx)("h2",{children:"Add a new"}),Object(a.jsx)(f,{newName:d,newNum:p,persons:n,setName:l,setNum:v,setPersons:c,setNotification:C,setFlag:B}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(m,{persons:n,filter:w,setPersons:c})]})};o.a.render(Object(a.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.43a857d6.chunk.js.map